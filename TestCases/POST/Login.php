<?php

/**
 * TestCases
 * php version 8.3
 *
 * @category  TestCases
 * @package   Microservices
 * @author    Ramesh N. Jangid (Sharma) <polygon.co.in@gmail.com>
 * @copyright Â© 2026 Ramesh N. Jangid (Sharma)
 * @license   MIT https://opensource.org/license/mit
 * @link      https://github.com/polygoncoin/Microservices
 * @since     Class available since Release 1.0.0
 */

namespace Microservices\TestCases;

use Microservices\App\Web;

$header = $defaultHeaders;
$header[] = $contentType;

$res = Web::trigger(
    homeURL: $homeURL,
    method: 'POST',
    route: '/login',
    header: $header,
    payload: json_encode(value: $payload)
);

if (
    !isset($res['response']['responseHeaders']['Set-Cookie'])
    && isset($res['response']['responseBody']['Results']['Token'])
    && $res
) {
    $token = $res['response']['responseBody']['Results']['Token'];
}

return $res;
